@model WEB2.Models.PurchaseDetail

@{
    ViewData["Title"] = "Create";
}

<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <link href="~/css/style.css" rel="stylesheet">
    
    <script type="text/javascript">
      $(document).ready(function () {
        // Denotes total number of rows
        var rowIdx = 0;

        // jQuery button click event to add a row
        $("#addBtn").on("click", function () {
          // Adding a row inside the tbody.
          $("#tbody").append(
            `<tr id="R${++rowIdx}">
                 <td class="row-index text-center">
                 <p> ${rowIdx}</p>
                 </td>
                 <td class= "text-center">
                   @{
                    <select  class="form-control pro" asp-items="ViewBag.ProductId"></select>
                 
                   } 
                   </td>
                 <td class= "text-center">
                    @{ <input type = "text" class="form-control pri" />}
                    </td>
                 <td class= "text-center">
                 @{ <input class="form-control qua" type="text" /> }
                    </td>
                 <td class= "text-center">
                    <p id = "total"></p>
                    </td>
                  <td class="text-center">
                    <button class="btn btn-danger remove"
                      type="button">Remove</button>
                    </td>
                  </tr>`
          );

          
        });

        // jQuery button click event to remove a row.
        $("#tbody").on("click", ".remove", function () {
          // Getting all the rows next to the row
          // containing the clicked button
          var child = $(this).closest("tr").nextAll();

          // Iterating across all the rows
          // obtained to change the index
          child.each(function () {
            // Getting <tr> id.
            var id = $(this).attr("id");

            // Getting the <p> inside the .row-index class.
            var idx = $(this).children(".row-index").children("p");

            // Gets the row number from <tr> id.
            var dig = parseInt(id.substring(1));

            // Modifying row index.
            idx.html(`${dig - 1}`);

            // Modifying row id.
            $(this).attr("id", `R${dig - 1}`);
          });

          // Removing the current row.
          $(this).closest("tr").remove();

          // Decreasing total number of rows by 1.
          rowIdx--;
        });
      });
    </script>
</head>
<body>
    <div class="container-fluid">
        <div class="row page-titles mx-0">
            <div class="col-sm-6 p-md-0">
                <div class="welcome-text">
                    <h4>Thêm nhà cung cấp</h4>
                </div>
            </div>
            <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="javascript:void(0)">Quản lý mua hàng</a></li>
                    <li class="breadcrumb-item active"><a asp-action="Requests">Yêu cầu báo giá</a></li>
                    <li class="breadcrumb-item active"><a href="javascript:void(0)">Tạo mới</a></li>
                </ol>
            </div>
        </div>
        <div class="container pt-4">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th class="text-center">STT</th>
                            <th class="text-center">Sản phẩm</th>
                            <th class="text-center">Giá</th>
                            <th class="text-center">Số lượng</th>
                                 <th class="text-center">Thanh toán</th>
                            <th class="text-center">Xóa</th>
                        </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </div>
            <button class="btn btn-md btn-primary" id="addBtn" type="button">
                Thêm sản phẩm
            </button>
        </div>


    </div>


    <!-- Required vendors -->
    <script src="~/vendor/global/global.min.js"></script>
    <script src="~/js/quixnav-init.js"></script>
    <script src="~/js/custom.min.js"></script>


</body>
@section Scripts {
    @{
    await Html.RenderPartialAsync("_ValidationScriptsPartial");
}
}

